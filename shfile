#!/bin/bash

# Get the list of all files in the project directory recursively
allFiles=$(find . -type f)

for file in $allFiles; do
    # Remove leading ./ from the file path for Git operations
    relativePath=${file#./}
    # Get the file name from the relative path
    fileName=$(basename "$relativePath")

    # Make the file executable
    chmod +x "$relativePath"

    # Check if the file is tracked by Git
    if git ls-files --error-unmatch "$relativePath" > /dev/null 2>&1; then
        # File is tracked, add to staging and commit with "update" message using the file name
        git add "$relativePath"
        git commit -m "update $fileName"
    else
        # File is not tracked, add to staging and commit with "add" message using the file name
        git add "$relativePath"
        git commit -m "add $fileName"
    fi
done

